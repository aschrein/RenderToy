; SPIR-V
; Version: 1.3
; Generator: Google Shaderc over Glslang; 7
; Bound: 476
; Schema: 0
               OpCapability Shader
               OpCapability ImageQuery
          %1 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint GLCompute %main "main" %gl_GlobalInvocationID
               OpExecutionMode %main LocalSize 16 16 1
               OpSource GLSL 450
               OpSourceExtension "GL_GOOGLE_cpp_style_line_directive"
               OpSourceExtension "GL_GOOGLE_include_directive"
               OpSourceExtension "GL_KHR_shader_subgroup_basic"
               OpSourceExtension "GL_KHR_shader_subgroup_shuffle"
               OpSourceExtension "GL_KHR_shader_subgroup_vote"
               OpName %main "main"
               OpName %intersect_box_vf3_vf3_vf3_vf3_f1_f1_ "intersect_box(vf3;vf3;vf3;vf3;f1;f1;"
               OpName %box_min "box_min"
               OpName %box_max "box_max"
               OpName %ray_invdir "ray_invdir"
               OpName %ray_origin "ray_origin"
               OpName %hit_min "hit_min"
               OpName %hit_max "hit_max"
               OpName %iterate_vf3_vf3_vf3_vf3_f1_u1_vf3_ "iterate(vf3;vf3;vf3;vf3;f1;u1;vf3;"
               OpName %ray_dir "ray_dir"
               OpName %ray_invdir_0 "ray_invdir"
               OpName %ray_origin_0 "ray_origin"
               OpName %camera_pos "camera_pos"
               OpName %hit_max_0 "hit_max"
               OpName %iter "iter"
               OpName %out_val "out_val"
               OpName %tbot "tbot"
               OpName %ttop "ttop"
               OpName %tmin "tmin"
               OpName %tmax "tmax"
               OpName %t "t"
               OpName %t0 "t0"
               OpName %t1 "t1"
               OpName %i "i"
               OpName %ray_offset "ray_offset"
               OpName %UBO "UBO"
               OpMemberName %UBO 0 "camera_pos"
               OpMemberName %UBO 1 "camera_look"
               OpMemberName %UBO 2 "camera_up"
               OpMemberName %UBO 3 "camera_right"
               OpMemberName %UBO 4 "camera_fov"
               OpMemberName %UBO 5 "ug_size"
               OpMemberName %UBO 6 "ug_bins_count"
               OpMemberName %UBO 7 "ug_bin_size"
               OpName %g_ubo "g_ubo"
               OpName %cell_id "cell_id"
               OpName %axis_delta "axis_delta"
               OpName %axis_distance "axis_distance"
               OpName %step "step"
               OpName %cell_id_offset "cell_id_offset"
               OpName %cell_id_cur "cell_id_cur"
               OpName %cell_delta "cell_delta"
               OpName %o "o"
               OpName %bin_offset "bin_offset"
               OpName %Bins "Bins"
               OpMemberName %Bins 0 "data"
               OpName %g_bins "g_bins"
               OpName %pnt_cnt "pnt_cnt"
               OpName %k "k"
               OpName %axis "axis"
               OpName %indexable "indexable"
               OpName %dim "dim"
               OpName %resultImage "resultImage"
               OpName %uv "uv"
               OpName %gl_GlobalInvocationID "gl_GlobalInvocationID"
               OpName %ray_origin_1 "ray_origin"
               OpName %xy "xy"
               OpName %ray_dir_0 "ray_dir"
               OpName %ray_invdir_1 "ray_invdir"
               OpName %color "color"
               OpName %hit_min_0 "hit_min"
               OpName %hit_max_1 "hit_max"
               OpName %param "param"
               OpName %param_0 "param"
               OpName %param_1 "param"
               OpName %param_2 "param"
               OpName %param_3 "param"
               OpName %param_4 "param"
               OpName %iter_0 "iter"
               OpName %ray_box_hit "ray_box_hit"
               OpName %out_val_0 "out_val"
               OpName %param_5 "param"
               OpName %param_6 "param"
               OpName %param_7 "param"
               OpName %param_8 "param"
               OpName %param_9 "param"
               OpName %param_10 "param"
               OpName %param_11 "param"
               OpName %Particles "Particles"
               OpMemberName %Particles 0 "data"
               OpName %g_particles "g_particles"
               OpMemberDecorate %UBO 0 Offset 0
               OpMemberDecorate %UBO 1 Offset 16
               OpMemberDecorate %UBO 2 Offset 32
               OpMemberDecorate %UBO 3 Offset 48
               OpMemberDecorate %UBO 4 Offset 60
               OpMemberDecorate %UBO 5 Offset 64
               OpMemberDecorate %UBO 6 Offset 68
               OpMemberDecorate %UBO 7 Offset 72
               OpDecorate %UBO Block
               OpDecorate %g_ubo DescriptorSet 0
               OpDecorate %g_ubo Binding 1
               OpDecorate %_runtimearr_uint ArrayStride 4
               OpMemberDecorate %Bins 0 Offset 0
               OpDecorate %Bins Block
               OpDecorate %g_bins DescriptorSet 0
               OpDecorate %g_bins Binding 2
               OpDecorate %resultImage DescriptorSet 0
               OpDecorate %resultImage Binding 0
               OpDecorate %resultImage NonReadable
               OpDecorate %gl_GlobalInvocationID BuiltIn GlobalInvocationId
               OpDecorate %gl_WorkGroupSize BuiltIn WorkgroupSize
               OpDecorate %_runtimearr_float ArrayStride 4
               OpMemberDecorate %Particles 0 Offset 0
               OpDecorate %Particles Block
               OpDecorate %g_particles DescriptorSet 0
               OpDecorate %g_particles Binding 3
       %void = OpTypeVoid
          %3 = OpTypeFunction %void
      %float = OpTypeFloat 32
    %v3float = OpTypeVector %float 3
%_ptr_Function_v3float = OpTypePointer Function %v3float
%_ptr_Function_float = OpTypePointer Function %float
       %bool = OpTypeBool
         %11 = OpTypeFunction %bool %_ptr_Function_v3float %_ptr_Function_v3float %_ptr_Function_v3float %_ptr_Function_v3float %_ptr_Function_float %_ptr_Function_float
       %uint = OpTypeInt 32 0
%_ptr_Function_uint = OpTypePointer Function %uint
         %22 = OpTypeFunction %void %_ptr_Function_v3float %_ptr_Function_v3float %_ptr_Function_v3float %_ptr_Function_v3float %_ptr_Function_float %_ptr_Function_uint %_ptr_Function_v3float
    %v2float = OpTypeVector %float 2
%_ptr_Function_v2float = OpTypePointer Function %v2float
     %uint_0 = OpConstant %uint 0
     %uint_1 = OpConstant %uint 1
    %float_0 = OpConstant %float 0
     %uint_3 = OpConstant %uint 3
        %UBO = OpTypeStruct %v3float %v3float %v3float %v3float %float %float %uint %float
%_ptr_Uniform_UBO = OpTypePointer Uniform %UBO
      %g_ubo = OpVariable %_ptr_Uniform_UBO Uniform
        %int = OpTypeInt 32 1
      %int_5 = OpConstant %int 5
%_ptr_Uniform_float = OpTypePointer Uniform %float
      %v3int = OpTypeVector %int 3
%_ptr_Function_v3int = OpTypePointer Function %v3int
      %int_7 = OpConstant %int 7
      %int_6 = OpConstant %int 6
%_ptr_Uniform_uint = OpTypePointer Uniform %uint
    %float_1 = OpConstant %float 1
%_ptr_Function_int = OpTypePointer Function %int
     %int_n1 = OpConstant %int -1
      %int_1 = OpConstant %int 1
     %uint_2 = OpConstant %uint 2
       %true = OpConstantTrue %bool
%_runtimearr_uint = OpTypeRuntimeArray %uint
       %Bins = OpTypeStruct %_runtimearr_uint
%_ptr_StorageBuffer_Bins = OpTypePointer StorageBuffer %Bins
     %g_bins = OpVariable %_ptr_StorageBuffer_Bins StorageBuffer
      %int_0 = OpConstant %int 0
%_ptr_StorageBuffer_uint = OpTypePointer StorageBuffer %uint
      %int_2 = OpConstant %int 2
     %uint_8 = OpConstant %uint 8
%_arr_uint_uint_8 = OpTypeArray %uint %uint_8
        %297 = OpConstantComposite %_arr_uint_uint_8 %uint_2 %uint_1 %uint_2 %uint_1 %uint_2 %uint_2 %uint_0 %uint_0
%_ptr_Function__arr_uint_uint_8 = OpTypePointer Function %_arr_uint_uint_8
%float_0_00100000005 = OpConstant %float 0.00100000005
      %v2int = OpTypeVector %int 2
%_ptr_Function_v2int = OpTypePointer Function %v2int
        %329 = OpTypeImage %float 2D 0 0 0 2 Rgba8
%_ptr_UniformConstant_329 = OpTypePointer UniformConstant %329
%resultImage = OpVariable %_ptr_UniformConstant_329 UniformConstant
     %v3uint = OpTypeVector %uint 3
%_ptr_Input_v3uint = OpTypePointer Input %v3uint
%gl_GlobalInvocationID = OpVariable %_ptr_Input_v3uint Input
     %v2uint = OpTypeVector %uint 2
%_ptr_Input_uint = OpTypePointer Input %uint
%_ptr_Uniform_v3float = OpTypePointer Uniform %v3float
   %float_n1 = OpConstant %float -1
    %float_2 = OpConstant %float 2
      %int_4 = OpConstant %int 4
      %int_3 = OpConstant %int 3
        %403 = OpConstantComposite %v3float %float_0 %float_0 %float_0
  %float_100 = OpConstant %float 100
    %v4float = OpTypeVector %float 4
    %uint_16 = OpConstant %uint 16
%gl_WorkGroupSize = OpConstantComposite %v3uint %uint_16 %uint_16 %uint_1
%_runtimearr_float = OpTypeRuntimeArray %float
  %Particles = OpTypeStruct %_runtimearr_float
%_ptr_StorageBuffer_Particles = OpTypePointer StorageBuffer %Particles
%g_particles = OpVariable %_ptr_StorageBuffer_Particles StorageBuffer
       %main = OpFunction %void None %3
          %5 = OpLabel
        %dim = OpVariable %_ptr_Function_v2int Function
         %uv = OpVariable %_ptr_Function_v2float Function
%ray_origin_1 = OpVariable %_ptr_Function_v3float Function
         %xy = OpVariable %_ptr_Function_v2float Function
  %ray_dir_0 = OpVariable %_ptr_Function_v3float Function
%ray_invdir_1 = OpVariable %_ptr_Function_v3float Function
      %color = OpVariable %_ptr_Function_v3float Function
  %hit_min_0 = OpVariable %_ptr_Function_float Function
  %hit_max_1 = OpVariable %_ptr_Function_float Function
      %param = OpVariable %_ptr_Function_v3float Function
    %param_0 = OpVariable %_ptr_Function_v3float Function
    %param_1 = OpVariable %_ptr_Function_v3float Function
    %param_2 = OpVariable %_ptr_Function_v3float Function
    %param_3 = OpVariable %_ptr_Function_float Function
    %param_4 = OpVariable %_ptr_Function_float Function
     %iter_0 = OpVariable %_ptr_Function_uint Function
%ray_box_hit = OpVariable %_ptr_Function_v3float Function
  %out_val_0 = OpVariable %_ptr_Function_v3float Function
    %param_5 = OpVariable %_ptr_Function_v3float Function
    %param_6 = OpVariable %_ptr_Function_v3float Function
    %param_7 = OpVariable %_ptr_Function_v3float Function
    %param_8 = OpVariable %_ptr_Function_v3float Function
    %param_9 = OpVariable %_ptr_Function_float Function
   %param_10 = OpVariable %_ptr_Function_uint Function
   %param_11 = OpVariable %_ptr_Function_v3float Function
        %332 = OpLoad %329 %resultImage
        %333 = OpImageQuerySize %v2int %332
               OpStore %dim %333
        %339 = OpLoad %v3uint %gl_GlobalInvocationID
        %340 = OpVectorShuffle %v2uint %339 %339 0 1
        %341 = OpConvertUToF %v2float %340
        %342 = OpLoad %v2int %dim
        %343 = OpConvertSToF %v2float %342
        %344 = OpFDiv %v2float %341 %343
               OpStore %uv %344
        %346 = OpAccessChain %_ptr_Input_uint %gl_GlobalInvocationID %uint_0
        %347 = OpLoad %uint %346
        %348 = OpAccessChain %_ptr_Function_int %dim %uint_0
        %349 = OpLoad %int %348
        %350 = OpBitcast %uint %349
        %351 = OpUGreaterThan %bool %347 %350
        %352 = OpLogicalNot %bool %351
               OpSelectionMerge %354 None
               OpBranchConditional %352 %353 %354
        %353 = OpLabel
        %355 = OpAccessChain %_ptr_Input_uint %gl_GlobalInvocationID %uint_1
        %356 = OpLoad %uint %355
        %357 = OpAccessChain %_ptr_Function_int %dim %uint_1
        %358 = OpLoad %int %357
        %359 = OpBitcast %uint %358
        %360 = OpUGreaterThan %bool %356 %359
               OpBranch %354
        %354 = OpLabel
        %361 = OpPhi %bool %351 %5 %360 %353
               OpSelectionMerge %363 None
               OpBranchConditional %361 %362 %363
        %362 = OpLabel
               OpReturn
        %363 = OpLabel
        %367 = OpAccessChain %_ptr_Uniform_v3float %g_ubo %int_0
        %368 = OpLoad %v3float %367
               OpStore %ray_origin_1 %368
        %372 = OpLoad %v2float %uv
        %373 = OpVectorTimesScalar %v2float %372 %float_2
        %374 = OpCompositeConstruct %v2float %float_n1 %float_n1
        %375 = OpFAdd %v2float %374 %373
        %377 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_4
        %378 = OpLoad %float %377
        %379 = OpCompositeConstruct %v2float %378 %float_1
        %380 = OpFMul %v2float %375 %379
               OpStore %xy %380
        %382 = OpAccessChain %_ptr_Uniform_v3float %g_ubo %int_1
        %383 = OpLoad %v3float %382
        %384 = OpAccessChain %_ptr_Uniform_v3float %g_ubo %int_2
        %385 = OpLoad %v3float %384
        %386 = OpAccessChain %_ptr_Function_float %xy %uint_1
        %387 = OpLoad %float %386
        %388 = OpVectorTimesScalar %v3float %385 %387
        %389 = OpFAdd %v3float %383 %388
        %391 = OpAccessChain %_ptr_Uniform_v3float %g_ubo %int_3
        %392 = OpLoad %v3float %391
        %393 = OpAccessChain %_ptr_Function_float %xy %uint_0
        %394 = OpLoad %float %393
        %395 = OpVectorTimesScalar %v3float %392 %394
        %396 = OpFAdd %v3float %389 %395
        %397 = OpExtInst %v3float %1 Normalize %396
               OpStore %ray_dir_0 %397
        %399 = OpLoad %v3float %ray_dir_0
        %400 = OpCompositeConstruct %v3float %float_1 %float_1 %float_1
        %401 = OpFDiv %v3float %400 %399
               OpStore %ray_invdir_1 %401
               OpStore %color %403
        %404 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_5
        %405 = OpLoad %float %404
        %406 = OpFNegate %float %405
        %407 = OpCompositeConstruct %v3float %406 %406 %406
        %408 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_5
        %409 = OpLoad %float %408
        %410 = OpCompositeConstruct %v3float %409 %409 %409
               OpStore %param %407
               OpStore %param_0 %410
        %416 = OpLoad %v3float %ray_invdir_1
               OpStore %param_1 %416
        %418 = OpLoad %v3float %ray_origin_1
               OpStore %param_2 %418
        %421 = OpFunctionCall %bool %intersect_box_vf3_vf3_vf3_vf3_f1_f1_ %param %param_0 %param_1 %param_2 %param_3 %param_4
        %422 = OpLoad %float %param_3
               OpStore %hit_min_0 %422
        %423 = OpLoad %float %param_4
               OpStore %hit_max_1 %423
               OpSelectionMerge %425 None
               OpBranchConditional %421 %424 %425
        %424 = OpLabel
               OpStore %iter_0 %uint_0
        %428 = OpLoad %v3float %ray_origin_1
        %429 = OpLoad %v3float %ray_dir_0
        %430 = OpLoad %float %hit_min_0
        %431 = OpVectorTimesScalar %v3float %429 %430
        %432 = OpFAdd %v3float %428 %431
               OpStore %ray_box_hit %432
               OpStore %out_val_0 %403
        %434 = OpLoad %float %hit_max_1
        %435 = OpLoad %float %hit_min_0
        %436 = OpFSub %float %434 %435
        %438 = OpLoad %v3float %ray_dir_0
               OpStore %param_5 %438
        %440 = OpLoad %v3float %ray_invdir_1
               OpStore %param_6 %440
        %442 = OpLoad %v3float %ray_box_hit
               OpStore %param_7 %442
        %444 = OpLoad %v3float %ray_origin_1
               OpStore %param_8 %444
               OpStore %param_9 %436
        %448 = OpFunctionCall %void %iterate_vf3_vf3_vf3_vf3_f1_u1_vf3_ %param_5 %param_6 %param_7 %param_8 %param_9 %param_10 %param_11
        %449 = OpLoad %uint %param_10
               OpStore %iter_0 %449
        %450 = OpLoad %v3float %param_11
               OpStore %out_val_0 %450
        %451 = OpLoad %uint %iter_0
        %452 = OpUGreaterThan %bool %451 %uint_0
               OpSelectionMerge %454 None
               OpBranchConditional %452 %453 %454
        %453 = OpLabel
        %455 = OpLoad %uint %iter_0
        %456 = OpConvertUToF %float %455
        %458 = OpFDiv %float %456 %float_100
        %459 = OpCompositeConstruct %v3float %458 %458 %458
               OpStore %color %459
               OpBranch %454
        %454 = OpLabel
               OpBranch %425
        %425 = OpLabel
        %460 = OpLoad %329 %resultImage
        %461 = OpLoad %v3uint %gl_GlobalInvocationID
        %462 = OpVectorShuffle %v2uint %461 %461 0 1
        %463 = OpBitcast %v2int %462
        %464 = OpLoad %v3float %color
        %466 = OpCompositeExtract %float %464 0
        %467 = OpCompositeExtract %float %464 1
        %468 = OpCompositeExtract %float %464 2
        %469 = OpCompositeConstruct %v4float %466 %467 %468 %float_1
               OpImageWrite %460 %463 %469
               OpReturn
               OpFunctionEnd
%intersect_box_vf3_vf3_vf3_vf3_f1_f1_ = OpFunction %bool None %11
    %box_min = OpFunctionParameter %_ptr_Function_v3float
    %box_max = OpFunctionParameter %_ptr_Function_v3float
 %ray_invdir = OpFunctionParameter %_ptr_Function_v3float
 %ray_origin = OpFunctionParameter %_ptr_Function_v3float
    %hit_min = OpFunctionParameter %_ptr_Function_float
    %hit_max = OpFunctionParameter %_ptr_Function_float
         %19 = OpLabel
       %tbot = OpVariable %_ptr_Function_v3float Function
       %ttop = OpVariable %_ptr_Function_v3float Function
       %tmin = OpVariable %_ptr_Function_v3float Function
       %tmax = OpVariable %_ptr_Function_v3float Function
          %t = OpVariable %_ptr_Function_v2float Function
         %t0 = OpVariable %_ptr_Function_float Function
         %t1 = OpVariable %_ptr_Function_float Function
         %33 = OpLoad %v3float %ray_invdir
         %34 = OpLoad %v3float %box_min
         %35 = OpLoad %v3float %ray_origin
         %36 = OpFSub %v3float %34 %35
         %37 = OpFMul %v3float %33 %36
               OpStore %tbot %37
         %39 = OpLoad %v3float %ray_invdir
         %40 = OpLoad %v3float %box_max
         %41 = OpLoad %v3float %ray_origin
         %42 = OpFSub %v3float %40 %41
         %43 = OpFMul %v3float %39 %42
               OpStore %ttop %43
         %45 = OpLoad %v3float %ttop
         %46 = OpLoad %v3float %tbot
         %47 = OpExtInst %v3float %1 FMin %45 %46
               OpStore %tmin %47
         %49 = OpLoad %v3float %ttop
         %50 = OpLoad %v3float %tbot
         %51 = OpExtInst %v3float %1 FMax %49 %50
               OpStore %tmax %51
         %55 = OpLoad %v3float %tmin
         %56 = OpVectorShuffle %v2float %55 %55 0 0
         %57 = OpLoad %v3float %tmin
         %58 = OpVectorShuffle %v2float %57 %57 1 2
         %59 = OpExtInst %v2float %1 FMax %56 %58
               OpStore %t %59
         %62 = OpAccessChain %_ptr_Function_float %t %uint_0
         %63 = OpLoad %float %62
         %65 = OpAccessChain %_ptr_Function_float %t %uint_1
         %66 = OpLoad %float %65
         %67 = OpExtInst %float %1 FMax %63 %66
               OpStore %t0 %67
         %68 = OpLoad %v3float %tmax
         %69 = OpVectorShuffle %v2float %68 %68 0 0
         %70 = OpLoad %v3float %tmax
         %71 = OpVectorShuffle %v2float %70 %70 1 2
         %72 = OpExtInst %v2float %1 FMin %69 %71
               OpStore %t %72
         %74 = OpAccessChain %_ptr_Function_float %t %uint_0
         %75 = OpLoad %float %74
         %76 = OpAccessChain %_ptr_Function_float %t %uint_1
         %77 = OpLoad %float %76
         %78 = OpExtInst %float %1 FMin %75 %77
               OpStore %t1 %78
         %79 = OpLoad %float %t0
               OpStore %hit_min %79
         %80 = OpLoad %float %t1
               OpStore %hit_max %80
         %81 = OpLoad %float %t1
         %82 = OpLoad %float %t0
         %84 = OpExtInst %float %1 FMax %82 %float_0
         %85 = OpFOrdGreaterThan %bool %81 %84
               OpReturnValue %85
               OpFunctionEnd
%iterate_vf3_vf3_vf3_vf3_f1_u1_vf3_ = OpFunction %void None %22
    %ray_dir = OpFunctionParameter %_ptr_Function_v3float
%ray_invdir_0 = OpFunctionParameter %_ptr_Function_v3float
%ray_origin_0 = OpFunctionParameter %_ptr_Function_v3float
 %camera_pos = OpFunctionParameter %_ptr_Function_v3float
  %hit_max_0 = OpFunctionParameter %_ptr_Function_float
       %iter = OpFunctionParameter %_ptr_Function_uint
    %out_val = OpFunctionParameter %_ptr_Function_v3float
         %31 = OpLabel
          %i = OpVariable %_ptr_Function_uint Function
 %ray_offset = OpVariable %_ptr_Function_float Function
    %cell_id = OpVariable %_ptr_Function_v3int Function
 %axis_delta = OpVariable %_ptr_Function_v3float Function
%axis_distance = OpVariable %_ptr_Function_v3float Function
       %step = OpVariable %_ptr_Function_v3int Function
%cell_id_offset = OpVariable %_ptr_Function_uint Function
%cell_id_cur = OpVariable %_ptr_Function_int Function
 %cell_delta = OpVariable %_ptr_Function_v3int Function
          %o = OpVariable %_ptr_Function_uint Function
 %bin_offset = OpVariable %_ptr_Function_uint Function
    %pnt_cnt = OpVariable %_ptr_Function_uint Function
          %k = OpVariable %_ptr_Function_uint Function
       %axis = OpVariable %_ptr_Function_uint Function
  %indexable = OpVariable %_ptr_Function__arr_uint_uint_8 Function
               OpStore %i %uint_0
               OpBranch %89
         %89 = OpLabel
               OpLoopMerge %91 %92 None
               OpBranch %93
         %93 = OpLabel
         %94 = OpLoad %uint %i
         %96 = OpULessThan %bool %94 %uint_3
               OpBranchConditional %96 %90 %91
         %90 = OpLabel
         %98 = OpLoad %uint %i
         %99 = OpAccessChain %_ptr_Function_float %ray_origin_0 %98
        %100 = OpLoad %float %99
        %107 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_5
        %108 = OpLoad %float %107
        %109 = OpFAdd %float %100 %108
               OpStore %ray_offset %109
        %113 = OpLoad %uint %i
        %114 = OpLoad %float %ray_offset
        %116 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_7
        %117 = OpLoad %float %116
        %118 = OpFDiv %float %114 %117
        %119 = OpExtInst %float %1 Floor %118
        %122 = OpAccessChain %_ptr_Uniform_uint %g_ubo %int_6
        %123 = OpLoad %uint %122
        %124 = OpConvertUToF %float %123
        %126 = OpFSub %float %124 %float_1
        %127 = OpExtInst %float %1 FClamp %119 %float_0 %126
        %128 = OpConvertFToS %int %127
        %130 = OpAccessChain %_ptr_Function_int %cell_id %113
               OpStore %130 %128
        %131 = OpLoad %uint %i
        %132 = OpAccessChain %_ptr_Function_float %ray_dir %131
        %133 = OpLoad %float %132
        %134 = OpFOrdLessThan %bool %133 %float_0
               OpSelectionMerge %136 None
               OpBranchConditional %134 %135 %167
        %135 = OpLabel
        %138 = OpLoad %uint %i
        %139 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_7
        %140 = OpLoad %float %139
        %141 = OpFNegate %float %140
        %142 = OpLoad %uint %i
        %143 = OpAccessChain %_ptr_Function_float %ray_invdir_0 %142
        %144 = OpLoad %float %143
        %145 = OpFMul %float %141 %144
        %146 = OpAccessChain %_ptr_Function_float %axis_delta %138
               OpStore %146 %145
        %148 = OpLoad %uint %i
        %149 = OpLoad %uint %i
        %150 = OpAccessChain %_ptr_Function_int %cell_id %149
        %151 = OpLoad %int %150
        %152 = OpConvertSToF %float %151
        %153 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_7
        %154 = OpLoad %float %153
        %155 = OpFMul %float %152 %154
        %156 = OpLoad %float %ray_offset
        %157 = OpFSub %float %155 %156
        %158 = OpLoad %uint %i
        %159 = OpAccessChain %_ptr_Function_float %ray_invdir_0 %158
        %160 = OpLoad %float %159
        %161 = OpFMul %float %157 %160
        %162 = OpAccessChain %_ptr_Function_float %axis_distance %148
               OpStore %162 %161
        %164 = OpLoad %uint %i
        %166 = OpAccessChain %_ptr_Function_int %step %164
               OpStore %166 %int_n1
               OpBranch %136
        %167 = OpLabel
        %168 = OpLoad %uint %i
        %169 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_7
        %170 = OpLoad %float %169
        %171 = OpLoad %uint %i
        %172 = OpAccessChain %_ptr_Function_float %ray_invdir_0 %171
        %173 = OpLoad %float %172
        %174 = OpFMul %float %170 %173
        %175 = OpAccessChain %_ptr_Function_float %axis_delta %168
               OpStore %175 %174
        %176 = OpLoad %uint %i
        %177 = OpLoad %uint %i
        %178 = OpAccessChain %_ptr_Function_int %cell_id %177
        %179 = OpLoad %int %178
        %181 = OpIAdd %int %179 %int_1
        %182 = OpConvertSToF %float %181
        %183 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_7
        %184 = OpLoad %float %183
        %185 = OpFMul %float %182 %184
        %186 = OpLoad %float %ray_offset
        %187 = OpFSub %float %185 %186
        %188 = OpLoad %uint %i
        %189 = OpAccessChain %_ptr_Function_float %ray_invdir_0 %188
        %190 = OpLoad %float %189
        %191 = OpFMul %float %187 %190
        %192 = OpAccessChain %_ptr_Function_float %axis_distance %176
               OpStore %192 %191
        %193 = OpLoad %uint %i
        %194 = OpAccessChain %_ptr_Function_int %step %193
               OpStore %194 %int_1
               OpBranch %136
        %136 = OpLabel
               OpBranch %92
         %92 = OpLabel
        %195 = OpLoad %uint %i
        %196 = OpIAdd %uint %195 %int_1
               OpStore %i %196
               OpBranch %89
         %91 = OpLabel
               OpStore %iter %uint_0
        %199 = OpAccessChain %_ptr_Function_int %cell_id %uint_2
        %200 = OpLoad %int %199
        %201 = OpBitcast %uint %200
        %202 = OpAccessChain %_ptr_Uniform_uint %g_ubo %int_6
        %203 = OpLoad %uint %202
        %204 = OpIMul %uint %201 %203
        %205 = OpAccessChain %_ptr_Uniform_uint %g_ubo %int_6
        %206 = OpLoad %uint %205
        %207 = OpIMul %uint %204 %206
        %208 = OpAccessChain %_ptr_Function_int %cell_id %uint_1
        %209 = OpLoad %int %208
        %210 = OpBitcast %uint %209
        %211 = OpAccessChain %_ptr_Uniform_uint %g_ubo %int_6
        %212 = OpLoad %uint %211
        %213 = OpIMul %uint %210 %212
        %214 = OpIAdd %uint %207 %213
        %215 = OpAccessChain %_ptr_Function_int %cell_id %uint_0
        %216 = OpLoad %int %215
        %217 = OpBitcast %uint %216
        %218 = OpIAdd %uint %214 %217
               OpStore %cell_id_offset %218
        %220 = OpLoad %uint %cell_id_offset
        %221 = OpBitcast %int %220
               OpStore %cell_id_cur %221
        %223 = OpLoad %v3int %step
        %224 = OpAccessChain %_ptr_Uniform_uint %g_ubo %int_6
        %225 = OpLoad %uint %224
        %226 = OpBitcast %int %225
        %227 = OpAccessChain %_ptr_Uniform_uint %g_ubo %int_6
        %228 = OpLoad %uint %227
        %229 = OpAccessChain %_ptr_Uniform_uint %g_ubo %int_6
        %230 = OpLoad %uint %229
        %231 = OpIMul %uint %228 %230
        %232 = OpBitcast %int %231
        %233 = OpCompositeConstruct %v3int %int_1 %226 %232
        %234 = OpIMul %v3int %223 %233
               OpStore %cell_delta %234
               OpBranch %235
        %235 = OpLabel
               OpLoopMerge %237 %238 None
               OpBranch %239
        %239 = OpLabel
               OpBranchConditional %true %236 %237
        %236 = OpLabel
        %241 = OpLoad %uint %iter
        %242 = OpIAdd %uint %241 %int_1
               OpStore %iter %242
        %244 = OpLoad %int %cell_id_cur
        %245 = OpBitcast %uint %244
               OpStore %o %245
        %252 = OpLoad %uint %o
        %253 = OpIMul %uint %uint_2 %252
        %255 = OpAccessChain %_ptr_StorageBuffer_uint %g_bins %int_0 %253
        %256 = OpLoad %uint %255
               OpStore %bin_offset %256
        %257 = OpLoad %uint %bin_offset
        %258 = OpUGreaterThan %bool %257 %uint_0
               OpSelectionMerge %260 None
               OpBranchConditional %258 %259 %260
        %259 = OpLabel
        %262 = OpLoad %uint %o
        %263 = OpIMul %uint %uint_2 %262
        %264 = OpIAdd %uint %263 %uint_1
        %265 = OpAccessChain %_ptr_StorageBuffer_uint %g_bins %int_0 %264
        %266 = OpLoad %uint %265
               OpStore %pnt_cnt %266
        %267 = OpLoad %uint %pnt_cnt
        %268 = OpLoad %uint %iter
        %269 = OpIAdd %uint %268 %267
               OpStore %iter %269
               OpBranch %260
        %260 = OpLabel
        %271 = OpAccessChain %_ptr_Function_float %axis_distance %uint_0
        %272 = OpLoad %float %271
        %273 = OpAccessChain %_ptr_Function_float %axis_distance %uint_1
        %274 = OpLoad %float %273
        %275 = OpFOrdLessThan %bool %272 %274
        %276 = OpSelect %uint %275 %uint_1 %uint_0
        %278 = OpShiftLeftLogical %uint %276 %int_2
        %279 = OpAccessChain %_ptr_Function_float %axis_distance %uint_0
        %280 = OpLoad %float %279
        %281 = OpAccessChain %_ptr_Function_float %axis_distance %uint_2
        %282 = OpLoad %float %281
        %283 = OpFOrdLessThan %bool %280 %282
        %284 = OpSelect %uint %283 %uint_1 %uint_0
        %285 = OpShiftLeftLogical %uint %284 %int_1
        %286 = OpIAdd %uint %278 %285
        %287 = OpAccessChain %_ptr_Function_float %axis_distance %uint_1
        %288 = OpLoad %float %287
        %289 = OpAccessChain %_ptr_Function_float %axis_distance %uint_2
        %290 = OpLoad %float %289
        %291 = OpFOrdLessThan %bool %288 %290
        %292 = OpSelect %uint %291 %uint_1 %uint_0
        %293 = OpIAdd %uint %286 %292
               OpStore %k %293
        %298 = OpLoad %uint %k
               OpStore %indexable %297
        %301 = OpAccessChain %_ptr_Function_uint %indexable %298
        %302 = OpLoad %uint %301
               OpStore %axis %302
        %303 = OpLoad %float %hit_max_0
        %304 = OpLoad %uint %axis
        %305 = OpAccessChain %_ptr_Function_float %axis_distance %304
        %306 = OpLoad %float %305
        %308 = OpFSub %float %306 %float_0_00100000005
        %309 = OpFOrdLessThan %bool %303 %308
               OpSelectionMerge %311 None
               OpBranchConditional %309 %310 %311
        %310 = OpLabel
               OpBranch %237
        %311 = OpLabel
        %313 = OpLoad %uint %axis
        %314 = OpAccessChain %_ptr_Function_int %cell_delta %313
        %315 = OpLoad %int %314
        %316 = OpLoad %int %cell_id_cur
        %317 = OpIAdd %int %316 %315
               OpStore %cell_id_cur %317
        %318 = OpLoad %uint %axis
        %319 = OpLoad %uint %axis
        %320 = OpAccessChain %_ptr_Function_float %axis_delta %319
        %321 = OpLoad %float %320
        %322 = OpAccessChain %_ptr_Function_float %axis_distance %318
        %323 = OpLoad %float %322
        %324 = OpFAdd %float %323 %321
        %325 = OpAccessChain %_ptr_Function_float %axis_distance %318
               OpStore %325 %324
               OpBranch %238
        %238 = OpLabel
               OpBranch %235
        %237 = OpLabel
               OpReturn
               OpFunctionEnd
