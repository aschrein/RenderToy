; SPIR-V
; Version: 1.3
; Generator: Google Shaderc over Glslang; 7
; Bound: 210
; Schema: 0
               OpCapability Shader
               OpCapability ImageQuery
          %1 = OpExtInstImport "GLSL.std.450"
               OpMemoryModel Logical GLSL450
               OpEntryPoint GLCompute %main "main" %gl_GlobalInvocationID
               OpExecutionMode %main LocalSize 16 16 1
               OpSource GLSL 450
               OpSourceExtension "GL_GOOGLE_cpp_style_line_directive"
               OpSourceExtension "GL_GOOGLE_include_directive"
               OpName %main "main"
               OpName %intersect_box_vf3_vf3_vf3_vf3_f1_f1_ "intersect_box(vf3;vf3;vf3;vf3;f1;f1;"
               OpName %box_min "box_min"
               OpName %box_max "box_max"
               OpName %ray_invdir "ray_invdir"
               OpName %ray_origin "ray_origin"
               OpName %hit_min "hit_min"
               OpName %hit_max "hit_max"
               OpName %tbot "tbot"
               OpName %ttop "ttop"
               OpName %tmin "tmin"
               OpName %tmax "tmax"
               OpName %t "t"
               OpName %t0 "t0"
               OpName %t1 "t1"
               OpName %dim "dim"
               OpName %resultImage "resultImage"
               OpName %uv "uv"
               OpName %gl_GlobalInvocationID "gl_GlobalInvocationID"
               OpName %ray_origin_0 "ray_origin"
               OpName %UBO "UBO"
               OpMemberName %UBO 0 "camera_pos"
               OpMemberName %UBO 1 "camera_look"
               OpMemberName %UBO 2 "camera_up"
               OpMemberName %UBO 3 "camera_right"
               OpMemberName %UBO 4 "camera_fov"
               OpMemberName %UBO 5 "ug_size"
               OpMemberName %UBO 6 "ug_bins_count"
               OpMemberName %UBO 7 "ug_bin_size"
               OpName %g_ubo "g_ubo"
               OpName %xy "xy"
               OpName %ray_dir "ray_dir"
               OpName %ray_invdir_0 "ray_invdir"
               OpName %color "color"
               OpName %hit_min_0 "hit_min"
               OpName %hit_max_0 "hit_max"
               OpName %param "param"
               OpName %param_0 "param"
               OpName %param_1 "param"
               OpName %param_2 "param"
               OpName %param_3 "param"
               OpName %param_4 "param"
               OpName %iter "iter"
               OpName %ray_box_hit "ray_box_hit"
               OpDecorate %resultImage DescriptorSet 0
               OpDecorate %resultImage Binding 0
               OpDecorate %resultImage NonReadable
               OpDecorate %gl_GlobalInvocationID BuiltIn GlobalInvocationId
               OpMemberDecorate %UBO 0 Offset 0
               OpMemberDecorate %UBO 1 Offset 16
               OpMemberDecorate %UBO 2 Offset 32
               OpMemberDecorate %UBO 3 Offset 48
               OpMemberDecorate %UBO 4 Offset 60
               OpMemberDecorate %UBO 5 Offset 64
               OpMemberDecorate %UBO 6 Offset 68
               OpMemberDecorate %UBO 7 Offset 72
               OpDecorate %UBO Block
               OpDecorate %g_ubo DescriptorSet 0
               OpDecorate %g_ubo Binding 1
               OpDecorate %gl_WorkGroupSize BuiltIn WorkgroupSize
       %void = OpTypeVoid
          %3 = OpTypeFunction %void
      %float = OpTypeFloat 32
    %v3float = OpTypeVector %float 3
%_ptr_Function_v3float = OpTypePointer Function %v3float
%_ptr_Function_float = OpTypePointer Function %float
       %bool = OpTypeBool
         %11 = OpTypeFunction %bool %_ptr_Function_v3float %_ptr_Function_v3float %_ptr_Function_v3float %_ptr_Function_v3float %_ptr_Function_float %_ptr_Function_float
    %v2float = OpTypeVector %float 2
%_ptr_Function_v2float = OpTypePointer Function %v2float
       %uint = OpTypeInt 32 0
     %uint_0 = OpConstant %uint 0
     %uint_1 = OpConstant %uint 1
    %float_0 = OpConstant %float 0
        %int = OpTypeInt 32 1
      %v2int = OpTypeVector %int 2
%_ptr_Function_v2int = OpTypePointer Function %v2int
         %81 = OpTypeImage %float 2D 0 0 0 2 Rgba8
%_ptr_UniformConstant_81 = OpTypePointer UniformConstant %81
%resultImage = OpVariable %_ptr_UniformConstant_81 UniformConstant
     %v3uint = OpTypeVector %uint 3
%_ptr_Input_v3uint = OpTypePointer Input %v3uint
%gl_GlobalInvocationID = OpVariable %_ptr_Input_v3uint Input
     %v2uint = OpTypeVector %uint 2
%_ptr_Input_uint = OpTypePointer Input %uint
%_ptr_Function_int = OpTypePointer Function %int
        %UBO = OpTypeStruct %v3float %v3float %v3float %v3float %float %float %uint %float
%_ptr_Uniform_UBO = OpTypePointer Uniform %UBO
      %g_ubo = OpVariable %_ptr_Uniform_UBO Uniform
      %int_0 = OpConstant %int 0
%_ptr_Uniform_v3float = OpTypePointer Uniform %v3float
   %float_n1 = OpConstant %float -1
    %float_2 = OpConstant %float 2
      %int_4 = OpConstant %int 4
%_ptr_Uniform_float = OpTypePointer Uniform %float
    %float_1 = OpConstant %float 1
      %int_1 = OpConstant %int 1
      %int_2 = OpConstant %int 2
      %int_3 = OpConstant %int 3
        %164 = OpConstantComposite %v3float %float_0 %float_0 %float_0
      %int_5 = OpConstant %int 5
%_ptr_Function_uint = OpTypePointer Function %uint
    %v4float = OpTypeVector %float 4
    %uint_16 = OpConstant %uint 16
%gl_WorkGroupSize = OpConstantComposite %v3uint %uint_16 %uint_16 %uint_1
       %main = OpFunction %void None %3
          %5 = OpLabel
        %dim = OpVariable %_ptr_Function_v2int Function
         %uv = OpVariable %_ptr_Function_v2float Function
%ray_origin_0 = OpVariable %_ptr_Function_v3float Function
         %xy = OpVariable %_ptr_Function_v2float Function
    %ray_dir = OpVariable %_ptr_Function_v3float Function
%ray_invdir_0 = OpVariable %_ptr_Function_v3float Function
      %color = OpVariable %_ptr_Function_v3float Function
  %hit_min_0 = OpVariable %_ptr_Function_float Function
  %hit_max_0 = OpVariable %_ptr_Function_float Function
      %param = OpVariable %_ptr_Function_v3float Function
    %param_0 = OpVariable %_ptr_Function_v3float Function
    %param_1 = OpVariable %_ptr_Function_v3float Function
    %param_2 = OpVariable %_ptr_Function_v3float Function
    %param_3 = OpVariable %_ptr_Function_float Function
    %param_4 = OpVariable %_ptr_Function_float Function
       %iter = OpVariable %_ptr_Function_uint Function
%ray_box_hit = OpVariable %_ptr_Function_v3float Function
         %84 = OpLoad %81 %resultImage
         %85 = OpImageQuerySize %v2int %84
               OpStore %dim %85
         %91 = OpLoad %v3uint %gl_GlobalInvocationID
         %92 = OpVectorShuffle %v2uint %91 %91 0 1
         %93 = OpConvertUToF %v2float %92
         %94 = OpLoad %v2int %dim
         %95 = OpConvertSToF %v2float %94
         %96 = OpFDiv %v2float %93 %95
               OpStore %uv %96
         %98 = OpAccessChain %_ptr_Input_uint %gl_GlobalInvocationID %uint_0
         %99 = OpLoad %uint %98
        %101 = OpAccessChain %_ptr_Function_int %dim %uint_0
        %102 = OpLoad %int %101
        %103 = OpBitcast %uint %102
        %104 = OpUGreaterThan %bool %99 %103
        %105 = OpLogicalNot %bool %104
               OpSelectionMerge %107 None
               OpBranchConditional %105 %106 %107
        %106 = OpLabel
        %108 = OpAccessChain %_ptr_Input_uint %gl_GlobalInvocationID %uint_1
        %109 = OpLoad %uint %108
        %110 = OpAccessChain %_ptr_Function_int %dim %uint_1
        %111 = OpLoad %int %110
        %112 = OpBitcast %uint %111
        %113 = OpUGreaterThan %bool %109 %112
               OpBranch %107
        %107 = OpLabel
        %114 = OpPhi %bool %104 %5 %113 %106
               OpSelectionMerge %116 None
               OpBranchConditional %114 %115 %116
        %115 = OpLabel
               OpReturn
        %116 = OpLabel
        %124 = OpAccessChain %_ptr_Uniform_v3float %g_ubo %int_0
        %125 = OpLoad %v3float %124
               OpStore %ray_origin_0 %125
        %129 = OpLoad %v2float %uv
        %130 = OpVectorTimesScalar %v2float %129 %float_2
        %131 = OpCompositeConstruct %v2float %float_n1 %float_n1
        %132 = OpFAdd %v2float %131 %130
        %135 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_4
        %136 = OpLoad %float %135
        %138 = OpCompositeConstruct %v2float %136 %float_1
        %139 = OpFMul %v2float %132 %138
               OpStore %xy %139
        %142 = OpAccessChain %_ptr_Uniform_v3float %g_ubo %int_1
        %143 = OpLoad %v3float %142
        %145 = OpAccessChain %_ptr_Uniform_v3float %g_ubo %int_2
        %146 = OpLoad %v3float %145
        %147 = OpAccessChain %_ptr_Function_float %xy %uint_1
        %148 = OpLoad %float %147
        %149 = OpVectorTimesScalar %v3float %146 %148
        %150 = OpFAdd %v3float %143 %149
        %152 = OpAccessChain %_ptr_Uniform_v3float %g_ubo %int_3
        %153 = OpLoad %v3float %152
        %154 = OpAccessChain %_ptr_Function_float %xy %uint_0
        %155 = OpLoad %float %154
        %156 = OpVectorTimesScalar %v3float %153 %155
        %157 = OpFAdd %v3float %150 %156
        %158 = OpExtInst %v3float %1 Normalize %157
               OpStore %ray_dir %158
        %160 = OpLoad %v3float %ray_dir
        %161 = OpCompositeConstruct %v3float %float_1 %float_1 %float_1
        %162 = OpFDiv %v3float %161 %160
               OpStore %ray_invdir_0 %162
               OpStore %color %164
        %166 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_5
        %167 = OpLoad %float %166
        %168 = OpFNegate %float %167
        %169 = OpCompositeConstruct %v3float %168 %168 %168
        %170 = OpAccessChain %_ptr_Uniform_float %g_ubo %int_5
        %171 = OpLoad %float %170
        %172 = OpCompositeConstruct %v3float %171 %171 %171
               OpStore %param %169
               OpStore %param_0 %172
        %178 = OpLoad %v3float %ray_invdir_0
               OpStore %param_1 %178
        %180 = OpLoad %v3float %ray_origin_0
               OpStore %param_2 %180
        %183 = OpFunctionCall %bool %intersect_box_vf3_vf3_vf3_vf3_f1_f1_ %param %param_0 %param_1 %param_2 %param_3 %param_4
        %184 = OpLoad %float %param_3
               OpStore %hit_min_0 %184
        %185 = OpLoad %float %param_4
               OpStore %hit_max_0 %185
               OpSelectionMerge %187 None
               OpBranchConditional %183 %186 %187
        %186 = OpLabel
               OpStore %iter %uint_0
        %191 = OpLoad %v3float %ray_origin_0
        %192 = OpLoad %v3float %ray_dir
        %193 = OpLoad %float %hit_min_0
        %194 = OpVectorTimesScalar %v3float %192 %193
        %195 = OpFAdd %v3float %191 %194
               OpStore %ray_box_hit %195
        %196 = OpLoad %v3float %ray_box_hit
        %197 = OpExtInst %v3float %1 FAbs %196
               OpStore %color %197
               OpBranch %187
        %187 = OpLabel
        %198 = OpLoad %81 %resultImage
        %199 = OpLoad %v3uint %gl_GlobalInvocationID
        %200 = OpVectorShuffle %v2uint %199 %199 0 1
        %201 = OpBitcast %v2int %200
        %202 = OpLoad %v3float %color
        %204 = OpCompositeExtract %float %202 0
        %205 = OpCompositeExtract %float %202 1
        %206 = OpCompositeExtract %float %202 2
        %207 = OpCompositeConstruct %v4float %204 %205 %206 %float_1
               OpImageWrite %198 %201 %207
               OpReturn
               OpFunctionEnd
%intersect_box_vf3_vf3_vf3_vf3_f1_f1_ = OpFunction %bool None %11
    %box_min = OpFunctionParameter %_ptr_Function_v3float
    %box_max = OpFunctionParameter %_ptr_Function_v3float
 %ray_invdir = OpFunctionParameter %_ptr_Function_v3float
 %ray_origin = OpFunctionParameter %_ptr_Function_v3float
    %hit_min = OpFunctionParameter %_ptr_Function_float
    %hit_max = OpFunctionParameter %_ptr_Function_float
         %19 = OpLabel
       %tbot = OpVariable %_ptr_Function_v3float Function
       %ttop = OpVariable %_ptr_Function_v3float Function
       %tmin = OpVariable %_ptr_Function_v3float Function
       %tmax = OpVariable %_ptr_Function_v3float Function
          %t = OpVariable %_ptr_Function_v2float Function
         %t0 = OpVariable %_ptr_Function_float Function
         %t1 = OpVariable %_ptr_Function_float Function
         %21 = OpLoad %v3float %ray_invdir
         %22 = OpLoad %v3float %box_min
         %23 = OpLoad %v3float %ray_origin
         %24 = OpFSub %v3float %22 %23
         %25 = OpFMul %v3float %21 %24
               OpStore %tbot %25
         %27 = OpLoad %v3float %ray_invdir
         %28 = OpLoad %v3float %box_max
         %29 = OpLoad %v3float %ray_origin
         %30 = OpFSub %v3float %28 %29
         %31 = OpFMul %v3float %27 %30
               OpStore %ttop %31
         %33 = OpLoad %v3float %ttop
         %34 = OpLoad %v3float %tbot
         %35 = OpExtInst %v3float %1 FMin %33 %34
               OpStore %tmin %35
         %37 = OpLoad %v3float %ttop
         %38 = OpLoad %v3float %tbot
         %39 = OpExtInst %v3float %1 FMax %37 %38
               OpStore %tmax %39
         %43 = OpLoad %v3float %tmin
         %44 = OpVectorShuffle %v2float %43 %43 0 0
         %45 = OpLoad %v3float %tmin
         %46 = OpVectorShuffle %v2float %45 %45 1 2
         %47 = OpExtInst %v2float %1 FMax %44 %46
               OpStore %t %47
         %51 = OpAccessChain %_ptr_Function_float %t %uint_0
         %52 = OpLoad %float %51
         %54 = OpAccessChain %_ptr_Function_float %t %uint_1
         %55 = OpLoad %float %54
         %56 = OpExtInst %float %1 FMax %52 %55
               OpStore %t0 %56
         %57 = OpLoad %v3float %tmax
         %58 = OpVectorShuffle %v2float %57 %57 0 0
         %59 = OpLoad %v3float %tmax
         %60 = OpVectorShuffle %v2float %59 %59 1 2
         %61 = OpExtInst %v2float %1 FMin %58 %60
               OpStore %t %61
         %63 = OpAccessChain %_ptr_Function_float %t %uint_0
         %64 = OpLoad %float %63
         %65 = OpAccessChain %_ptr_Function_float %t %uint_1
         %66 = OpLoad %float %65
         %67 = OpExtInst %float %1 FMin %64 %66
               OpStore %t1 %67
         %68 = OpLoad %float %t0
               OpStore %hit_min %68
         %69 = OpLoad %float %t1
               OpStore %hit_max %69
         %70 = OpLoad %float %t1
         %71 = OpLoad %float %t0
         %73 = OpExtInst %float %1 FMax %71 %float_0
         %74 = OpFOrdGreaterThan %bool %70 %73
               OpReturnValue %74
               OpFunctionEnd
